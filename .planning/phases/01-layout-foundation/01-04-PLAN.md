---
phase: 01-layout-foundation
plan: 04
type: execute
wave: 4
depends_on: ["01-03"]
files_modified: [App.tsx, index.html]
autonomous: true

must_haves:
  truths:
    - "Game screen uses LayoutShell with consistent layout (major refactor)"
    - "Desktop scrollbar-gutter CSS prevents layout shifts"
    - "All min-h-screen replaced with min-h-[100dvh]"
    - "All 8 screens use consistent LayoutShell component"
  artifacts:
    - path: "App.tsx"
      provides: "renderGame refactored and all min-h-screen replaced"
      contains: ["LayoutShell", "min-h-\[100dvh\]"]
    - path: "index.html"
      provides: "scrollbar-gutter CSS for desktop"
      contains: ["scrollbar-gutter: stable"]
  key_links:
    - from: "index.html CSS"
      to: "LayoutShell root element"
      via: "html selector with scrollbar-gutter property"
      pattern: "html \{ scrollbar-gutter: stable; \}"
---

<objective>
Refactor Game screen to use LayoutShell and fix all remaining viewport/scrollbar issues. This is the final implementation plan for Phase 1.

Purpose: Complete the layout unification by refactoring the Game screen (which had a different offset layout causing visual jumps), add scrollbar-gutter CSS to prevent desktop layout shifts, and ensure all viewport units use 100dvh for mobile stability.

Output: App.tsx with renderGame using LayoutShell and index.html with scrollbar-gutter CSS.
</objective>

<execution_context>
@/Users/yevgenschweden/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/yevgenschweden/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/01-layout-foundation/01-03-SUMMARY.md
@/Users/yevgenschweden/hyperscale/App.tsx
@/Users/yevgenschweden/hyperscale/index.html

**Current renderGame (lines 523-751):**
This is the PROBLEM screen - it uses a different layout pattern:
```tsx
const renderGame = () => {
  // ...
  return (
    <div className="min-h-screen bg-[#0a0a0c] flex flex-col relative pt-16 md:pt-12 pb-12 md:pb-12 safe-area-top safe-area-bottom">
      {/* Top HUD */}
      <div className="absolute top-2 md:top-4 left-1/2 -translate-x-1/2 w-full max-w-4xl px-3 md:px-4...">
        {/* HUD content */}
      </div>

      {/* Main Content */}
      <div className="flex-1 flex flex-col items-center justify-center pt-8 p-3 pb-2 md:p-8 md:pb-4 gap-4 md:gap-8">
        {/* Card and Roaster */}
      </div>

      {/* Taskbar */}
      <div className="h-12 bg-slate-900/95... fixed bottom-0 w-full...">
        {/* Taskbar content */}
      </div>
    </div>
  );
};
```

Key differences from other screens:
1. Uses `relative` positioning with `pt-16` (not items-center justify-center)
2. Has HUD positioned `absolute top-2`
3. Has Taskbar as `fixed bottom-0`
4. Main content is the swipeable card game area

**Refactoring Strategy:**
- The Game screen is fundamentally different - it's an app-like interface with HUD and Taskbar
- LayoutShell will provide the responsive base (items-start vs items-center)
- Keep the internal structure: HUD (absolute), Main Content (flex-1), Taskbar (fixed)
- The LayoutShell's items-start on mobile will align with the HUD positioning

**scrollbar-gutter for Desktop (LAYOUT-03):**
Add to index.html style block:
```css
@media (min-width: 1024px) {
  html {
    scrollbar-gutter: stable;
  }
}
```

This prevents layout shifts when scrollbar appears/disappears on desktop.

**100dvh Replacement (LAYOUT-04):**
Search and replace any remaining min-h-screen with min-h-[100dvh]
</context>

<tasks>

<task type="auto">
  <name>Task 1: Refactor renderGame to use LayoutShell</name>
  <files>App.tsx</files>
  <action>Refactor the renderGame method to use LayoutShell:

The Game screen is complex - it has:
- Absolute positioned HUD at top
- Fixed taskbar at bottom
- Flex-1 main content area with swipeable card
- Uses bg-[#0a0a0c] background

Current structure (simplified, lines 523-751):
```tsx
const renderGame = () => {
  const cards = ROLE_CARDS[state.role!];
  const currentCard = cards[state.currentCardIndex];
  const personality = PERSONALITIES[state.personality!];

  return (
    <div className="min-h-screen bg-[#0a0a0c] flex flex-col relative pt-16 md:pt-12 pb-12 md:pb-12 safe-area-top safe-area-bottom">
      {/* Top HUD - Budget Focused */}
      <div className="absolute top-2 md:top-4 left-1/2 -translate-x-1/2 w-full max-w-4xl px-3 md:px-4...">
        {/* HUD bars */}
      </div>

      {/* Main Content - Responsive Layout */}
      <div className="flex-1 flex flex-col items-center justify-center pt-8 p-3 pb-2 md:p-8 md:pb-4 gap-4 md:gap-8">
        {/* Main App Window (swipeable card) */}
        <div ref={cardRef} className="flex-1 w-full max-w-full lg:max-w-[43rem]..." ...>
          {/* Card content */}
        </div>

        {/* Side Roaster Terminal */}
        <div className="w-full max-w-[43rem] lg:w-[43rem] h-auto lg:h-[260px]...">
          {/* Roaster content */}
        </div>
      </div>

      {/* Taskbar */}
      <div className="h-12 bg-slate-900/95... fixed bottom-0 w-full...">
        {/* Taskbar content */}
      </div>

      {/* Answer Window Overlay */}
      {feedbackOverlay && (...)}
    </div>
  );
};
```

New structure using LayoutShell:
```tsx
const renderGame = () => {
  const cards = ROLE_CARDS[state.role!];
  const currentCard = cards[state.currentCardIndex];
  const personality = PERSONALITIES[state.personality!];

  return (
    <LayoutShell className="bg-[#0a0a0c] overflow-hidden">
      {/* Top HUD - Budget Focused - Mobile Optimized */}
      <div className="absolute top-2 md:top-4 left-1/2 -translate-x-1/2 w-full max-w-4xl px-3 md:px-4 flex flex-col md:flex-row gap-2 md:gap-6 items-stretch md:items-center z-10">
        <div className="flex-1 space-y-1 min-w-0">
          <div className="flex justify-between text-[10px] font-black tracking-wide mb-1">
            <span className={`${state.budget < 2000000 ? 'text-red-500 animate-pulse' : 'text-green-400'} inline-flex items-center gap-1.5`}><i className="fa-solid fa-coins text-[10px]" aria-hidden></i>Budget</span>
            <span className={state.budget < 2000000 ? 'text-red-500' : 'text-green-400'}>{formatBudget(state.budget)}</span>
          </div>
          <div className="h-2 bg-slate-900 rounded border border-white/10 overflow-hidden bg-stripes p-[1px]">
            <div 
              className={`h-full progress-bar ${state.budget < 2000000 ? 'bg-red-500' : 'bg-green-500'}`} 
              style={{ width: `${Math.min(100, (state.budget / INITIAL_BUDGET) * 100)}%` }} 
            />
          </div>
        </div>
        <div className="flex gap-3 md:gap-6 w-full md:w-auto">
          <div className="flex-1 md:w-28 space-y-1">
            <div className="flex justify-between text-[10px] font-black tracking-wide mb-1">
              <span className={`${state.heat > 80 ? 'text-yellow-400 animate-pulse' : 'text-orange-500'} inline-flex items-center gap-1.5`}><i className="fa-solid fa-fire text-[10px]" aria-hidden></i>Risk</span>
              <span className="text-orange-500">{state.heat}%</span>
            </div>
            <div className="h-2 bg-slate-900 rounded border border-white/10 overflow-hidden bg-stripes p-[1px]">
              <div className={`h-full progress-bar ${state.heat > 80 ? 'bg-yellow-400' : 'bg-orange-600'}`} style={{ width: `${state.heat}%` }} />
            </div>
          </div>
          <div className="flex-1 md:w-28 space-y-1">
            <div className="flex justify-between text-[10px] font-black tracking-wide mb-1">
              <span className={`${state.hype < 20 ? 'text-red-500 animate-pulse' : 'text-cyan-400'} inline-flex items-center gap-1.5`}><i className="fa-solid fa-chart-line text-[10px]" aria-hidden></i>Hype</span>
              <span className="text-cyan-400">{state.hype}%</span>
            </div>
            <div className="h-2 bg-slate-900 rounded border border-white/10 overflow-hidden bg-stripes p-[1px]">
              <div className={`h-full progress-bar ${state.hype < 20 ? 'bg-red-500' : 'bg-cyan-500'}`} style={{ width: `${state.hype}%` }} />
            </div>
          </div>
        </div>
      </div>

      {/* Main Content - Responsive Layout */}
      <div className="flex-1 flex flex-col items-center justify-center pt-20 md:pt-24 p-3 pb-16 md:p-8 md:pb-20 gap-4 md:gap-8">
        
        {/* Main App Window */}
        <div
          ref={cardRef}
          className={`flex-1 w-full max-w-full lg:max-w-[43rem] min-h-[360px] md:min-h-[320px] bg-slate-900/90 border border-slate-700 rounded-xl overflow-hidden shadow-2xl flex flex-col relative select-none ${cardExitDirection ? `swipe-exit-${cardExitDirection.toLowerCase()}` : 'ticket-transition'}`}
          key={state.currentCardIndex}
          onTouchStart={handleTouchStart}
          onTouchMove={handleTouchMove}
          onTouchEnd={handleTouchEnd}
          onMouseDown={handleTouchStart}
          onMouseMove={handleTouchMove}
          onMouseUp={handleTouchEnd}
          onMouseLeave={handleTouchEnd}
          style={{
            transform: cardExitDirection
              ? undefined
              : `translateX(${swipeOffset}px) rotate(${swipeOffset * 0.05}deg)`,
            transition: isDragging ? 'none' : 'transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94)',
            cursor: isDragging ? 'grabbing' : 'grab',
          }}
        >
          {/* Swipe Preview Overlay */}
          {swipeDirection && (
            <div className={`absolute inset-0 pointer-events-none z-10 ${swipeDirection === 'RIGHT' ? 'swipe-gradient-right' : 'swipe-gradient-left'}`}>
              <div className={`absolute top-1/2 -translate-y-1/2 ${swipeDirection === 'RIGHT' ? 'right-8' : 'left-8'} text-4xl md:text-6xl font-black tracking-tighter ${swipeDirection === 'RIGHT' ? 'text-green-500' : 'text-red-500'} opacity-50`}>
                {swipeDirection === 'RIGHT' ? currentCard.onRight.label.toUpperCase() : currentCard.onLeft.label.toUpperCase()}
              </div>
            </div>
          )}

          <div className="bg-slate-800 px-3 md:px-4 py-2 flex items-center justify-between border-b border-white/5">
            <div className="flex items-center gap-2 text-[10px] mono font-bold text-slate-400 truncate">
              <i className={`fa-solid ${currentCard.source === AppSource.IDE ? 'fa-terminal' : 'fa-hashtag'}`} aria-hidden></i>
              <span className="truncate">{currentCard.source} // {currentCard.context}</span>
            </div>
            <div className="flex gap-1.5 shrink-0">
              <div className="w-2.5 h-2.5 rounded-full bg-slate-600"></div>
              <div className="w-2.5 h-2.5 rounded-full bg-slate-600"></div>
              <div className="w-2.5 h-2.5 rounded-full bg-red-500/50"></div>
            </div>
          </div>
          <div className="p-4 md:p-10 flex flex-col justify-between flex-1 overflow-hidden">
            <div className="space-y-3 md:space-y-6 overflow-y-auto">
              <div className="flex items-center gap-3">
                <div className="w-8 h-8 md:w-10 md:h-10 rounded bg-slate-800 flex items-center justify-center border border-white/5 shrink-0">
                   <i className="fa-solid fa-user-robot text-slate-400 text-xs md:text-base" aria-hidden></i>
                </div>
                <div className="min-w-0">
                  <div className="text-xs md:text-sm font-bold text-cyan-400 truncate">{currentCard.sender}</div>
                  <div className="text-[9px] md:text-[10px] text-slate-400 mono truncate">Incident #{(state.currentCardIndex + 1) * 324}</div>
                </div>
              </div>
              <p className="text-base md:text-xl font-medium leading-relaxed text-slate-200">
                "{currentCard.text}"
              </p>
            </div>
            <div className="flex flex-col gap-3 mt-6 md:mt-8 shrink-0">
              {/* Keyboard hint for desktop */}
              <div className="flex items-center justify-center gap-2 text-[10px] text-slate-400 mono">
                <span className="hidden md:inline px-1.5 py-0.5 bg-slate-800 border border-slate-700 rounded">←</span>
                <span className="hidden md:inline">Use arrow keys or swipe</span>
                <span className="hidden md:inline px-1.5 py-0.5 bg-slate-800 border border-slate-700 rounded">→</span>
                
                {/* Mobile swipe hint */}
                <span className="flex md:hidden items-center justify-center gap-3">
                  <span className="text-red-500 font-bold">← Swipe left</span>
                  <span className="text-slate-600">or</span>
                  <span className="text-green-500 font-bold">Swipe right →</span>
                </span>
              </div>

              <div className="flex flex-row gap-3 md:gap-4">
                 <button onClick={() => handleSwipeChoice('LEFT')} className="flex-1 py-2 px-3 md:py-4 md:px-4 text-sm md:text-base border border-white text-white bg-transparent font-bold tracking-wide hover:bg-cyan-500 hover:border-cyan-500 hover:text-black active:bg-cyan-500 active:border-cyan-500 active:text-black transition-all min-h-[40px] md:min-h-[48px]">
                   {currentCard.onLeft.label}
                 </button>
                 <button onClick={() => handleSwipeChoice('RIGHT')} className="flex-1 py-2 px-3 md:py-4 md:px-4 text-sm md:text-base border border-white text-white bg-transparent font-black tracking-wide hover:bg-cyan-500 hover:border-cyan-500 hover:text-black active:bg-cyan-500 active:border-cyan-500 active:text-black transition-all min-h-[40px] md:min-h-[48px]">
                   {currentCard.onRight.label}
                 </button>
              </div>
            </div>
          </div>
        </div>

        {/* Side Roaster Terminal - Below incident */}
        <div className="w-full max-w-[43rem] lg:w-[43rem] h-auto lg:h-[260px] bg-black/80 border border-slate-800 rounded-xl overflow-hidden flex flex-col shadow-2xl">
          <div className="bg-slate-900 px-4 py-2 border-b border-white/5 flex items-center justify-between">
            <span className="text-[10px] mono font-bold text-green-500">roast_con.exe</span>
            <i className="fa-solid fa-minus text-[10px] text-slate-400" aria-hidden></i>
          </div>
          <div className="p-4 flex-1 flex flex-col">
            <p className="text-[10px] mono text-green-700 mb-4 hidden sm:block">Describe workflow for governance review...</p>
            <textarea 
              value={roastInput}
              onChange={(e) => setRoastInput(e.target.value)}
              placeholder="e.g. I use ChatGPT for company secrets..."
              aria-label="Describe workflow for governance review"
              className="w-full h-14 lg:h-24 bg-black border border-green-900/30 rounded p-3 text-xs mono text-green-500 focus:outline-none placeholder:text-green-900/50 resize-none mb-3"
            />
            <button 
              onClick={handleRoast}
              disabled={isRoasting}
              className="w-fit px-8 py-2.5 bg-green-900/20 border border-green-500/40 text-green-500 font-bold text-[10px] mono tracking-wide hover:bg-green-500 hover:text-black transition-all mb-3 min-h-[44px] self-center"
            >
              {isRoasting ? 'Scanning...' : 'Init roast'}
            </button>
            {roastOutput && (
              <div className="bg-green-900/10 border border-green-500/20 p-3 rounded text-[10px] mono text-green-400 italic overflow-auto max-h-24">
                 <div className="mb-2 text-green-600 font-bold tracking-wide">{'>>>'} {personality.name}:</div>
                 {roastOutput}
              </div>
            )}
          </div>
        </div>
      </div>

      {/* Taskbar - Mobile Optimized */}
      <div className="h-12 bg-slate-900/95 border-t border-white/5 flex items-center px-3 md:px-6 justify-between fixed bottom-0 w-full backdrop-blur-md safe-area-bottom z-20">
        <div className="flex items-center gap-2 md:gap-6">
           <button className="bg-slate-800 hover:bg-slate-700 px-2 md:px-4 py-1.5 flex items-center gap-2 border border-white/5 transition-colors min-h-[36px]">
             <i className="fa-solid fa-atom text-cyan-400" aria-hidden></i>
             <span className="text-xs font-black tracking-wide hidden sm:inline">Start</span>
           </button>
           <div className="flex gap-2 md:gap-4">
             <div className="w-8 h-8 rounded bg-slate-800 flex items-center justify-center border border-cyan-500/50 shadow-[0_0_10px_rgba(34,211,238,0.3)]">
               <i className="fa-solid fa-comment-dots text-xs text-cyan-400" aria-hidden></i>
             </div>
             <div className="w-8 h-8 rounded bg-slate-800 flex items-center justify-center border border-white/5 opacity-50 hidden sm:flex">
               <i className="fa-solid fa-terminal text-xs text-slate-400" aria-hidden></i>
             </div>
           </div>
        </div>
        <div className="flex items-center gap-2 md:gap-6">
          <div className="bg-black/50 px-2 md:px-3 py-1.5 rounded border border-white/5 flex items-center gap-2 md:gap-3">
             <div className="w-5 h-5 rounded-full bg-slate-800 flex items-center justify-center">
               <i className={`fa-solid ${state.personality === PersonalityType.ROASTER ? 'fa-user-ninja' : state.personality === PersonalityType.ZEN_MASTER ? 'fa-leaf' : 'fa-rocket'} text-[10px] text-cyan-500`} aria-hidden></i>
             </div>
             <span className="text-[10px] mono font-bold text-slate-400 tracking-tighter hidden md:inline">{personality.name}</span>
          </div>
          <div className="text-right">
            <div className="text-xs mono font-bold text-slate-300">{currentTime}</div>
            <div className="text-[8px] mono text-slate-400 tracking-wide hidden sm:block">v0.92-prod</div>
          </div>
        </div>
      </div>

      {/* Answer Window - Overlay with fine display */}
      {feedbackOverlay &&
        (
          <div className="fixed inset-0 z-50 flex items-center justify-center p-4 md:p-6 bg-black/70 backdrop-blur-sm" role="dialog" aria-modal="true" aria-labelledby="feedback-overlay-title" aria-describedby="feedback-overlay-desc">
            <div className="w-full max-w-lg bg-slate-900 border border-slate-700 p-6 md:p-10 rounded-2xl text-center shadow-2xl max-h-[90vh] overflow-y-auto">
              <h2 id="feedback-overlay-title" className="sr-only">Governance feedback</h2>
              <div className={`text-4xl md:text-6xl mb-4 md:mb-6 ${feedbackOverlay.fine > 0 ? 'text-red-500' : 'text-green-500'}`}>
                <i className={`fa-solid ${feedbackOverlay.fine > 0 ? 'fa-triangle-exclamation' : 'fa-circle-check'}`} aria-hidden></i>
              </div>
              
              {feedbackOverlay.fine > 0 && (
                <div className="mb-4 md:mb-6 p-3 md:p-4 bg-red-900/20 border border-red-500/30 rounded-lg">
                  <div className="text-red-400 text-xs font-bold tracking-wide mb-1">Violation fine</div>
                  <div className="text-2xl md:text-3xl font-black text-red-500">-{formatBudget(feedbackOverlay.fine)}</div>
                  <div className="text-red-400/70 text-xs mt-1">{feedbackOverlay.violation}</div>
                </div>
              )}
              
              <div className="text-cyan-400 mono text-[10px] mb-3 md:mb-4 font-bold tracking-wide">{personality.name}'s review</div>
              <p className="text-lg md:text-2xl mb-4 md:mb-8 italic text-slate-100 font-light leading-relaxed">"{feedbackOverlay.text}"</p>
              
              <div id="feedback-overlay-desc" className="bg-black/50 border border-white/5 p-4 md:p-6 rounded-xl text-left mb-4 md:mb-8 min-h-[4.5rem]">
                <div className="text-[10px] font-bold text-slate-400 tracking-wide mb-3 border-b border-white/5 pb-2">Governance alert</div>
                <p className="text-xs md:text-sm text-slate-400 leading-relaxed font-light">{feedbackOverlay.lesson}</p>
              </div>

              <button 
                onClick={nextIncident}
                className="w-auto px-8 py-2.5 text-sm md:text-base bg-white text-black font-black tracking-wide hover:bg-cyan-500 transition-all shadow-xl transform active:scale-95"
              >
                Next ticket
              </button>
            </div>
          </div>
        )
      }
    </LayoutShell>
  );
};
```

Key changes:
- Replace outer div with LayoutShell
- Pass className="bg-[#0a0a0c] overflow-hidden" to preserve background and prevent scroll issues
- Remove: min-h-screen, flex flex-col, relative, pt-16, pb-12, safe-area classes (LayoutShell handles these)
- Adjust main content padding: pt-20 md:pt-24 to accommodate absolute HUD
- Adjust main content padding-bottom: pb-16 md:pb-20 to accommodate fixed taskbar
- Add z-10 to HUD and z-20 to taskbar for proper stacking
- Keep all swipe gesture handlers and card logic exactly the same
- Keep fixed taskbar (it's meant to stay at bottom during scroll)</action>
  <verify>Verify renderGame uses LayoutShell:
```bash
grep -A 5 "const renderGame" App.tsx | grep -E "(LayoutShell|return)"
grep "LayoutShell" App.tsx | wc -l  # Should show 8 usages (one per screen)
```</verify>
  <done>renderGame uses LayoutShell with preserved swipe functionality and app-like layout structure.</done>
</task>

<task type="auto">
  <name>Task 2: Add scrollbar-gutter CSS to index.html</name>
  <files>index.html</files>
  <action>Add scrollbar-gutter CSS to index.html to prevent desktop layout shifts:

Locate the style block in index.html (around line 17-384). Add the following CSS rule inside the style block, preferably near the html/body selectors:

```css
/* Prevent layout shifts from scrollbar on desktop */
@media (min-width: 1024px) {
  html {
    scrollbar-gutter: stable;
  }
}
```

Add this after the existing html selector (around line 311 where `html { scroll-behavior: smooth; }` is defined).

This ensures:
1. On desktop (≥1024px): scrollbar-gutter reserves space for scrollbar, preventing layout shifts when content overflows
2. On mobile (<1024px): No scrollbar-gutter (mobile browsers handle scrollbars differently)

The scrollbar-gutter: stable property reserves space for the scrollbar even when content doesn't overflow, preventing the "jumps" that occur when scrollbar appears/disappears.</action>
  <verify>Verify scrollbar-gutter CSS added:
```bash
grep -A 3 "@media (min-width: 1024px)" index.html | grep -A 2 "scrollbar-gutter"
```</verify>
  <done>index.html contains scrollbar-gutter: stable for desktop breakpoints (≥1024px).</done>
</task>

<task type="auto">
  <name>Task 3: Replace remaining min-h-screen with min-h-[100dvh]</name>
  <files>App.tsx</files>
  <action>Search for and replace any remaining min-h-screen instances in App.tsx:

Run a search first to find any remaining instances:
```bash
grep -n "min-h-screen" App.tsx
```

If any found, replace with min-h-[100dvh]. Note: All render methods should now use LayoutShell which already uses min-h-[100dvh] internally, so there should be no remaining instances in the render methods. If found in other areas (like the feedback overlay or other components), update them.

Also verify the root return statement still uses min-h-[100dvh]:
```tsx
return (
  <div className="min-h-[100dvh] overflow-y-auto stage-transition" key={state.stage}>
    {renderStage()}
  </div>
);
```

This completes LAYOUT-04 (mobile viewport instability fixed).</action>
  <verify>Verify no min-h-screen remains:
```bash
grep -c "min-h-screen" App.tsx || echo "0 remaining"
grep "min-h-\[100dvh\]" App.tsx | wc -l
```</verify>
  <done>All min-h-screen replaced with min-h-[100dvh] in App.tsx.</done>
</task>

</tasks>

<verification>
After completing all tasks:
1. Verify renderGame uses LayoutShell
2. Verify scrollbar-gutter CSS exists in index.html for lg: breakpoint
3. Verify no min-h-screen remains in App.tsx
4. Count LayoutShell usages - should be 8 (one per screen)
5. Verify app still compiles and runs
</verification>

<success_criteria>
- renderGame uses LayoutShell with preserved swipe functionality
- All 8 screens now use LayoutShell consistently
- index.html has scrollbar-gutter: stable for desktop (≥1024px)
- No min-h-screen remains in App.tsx
- Mobile viewport uses 100dvh for stability
- Game screen swipe gestures still work correctly
- HUD and taskbar positioning maintained
</success_criteria>

<output>
After completion, create `.planning/phases/01-layout-foundation/01-04-SUMMARY.md`
</output>
