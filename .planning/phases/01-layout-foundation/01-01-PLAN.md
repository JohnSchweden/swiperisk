---
phase: 01-layout-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [components/LayoutShell.tsx, App.tsx]
autonomous: true

must_haves:
  truths:
    - "LayoutShell component exists and is importable"
    - "LayoutShell handles responsive breakpoints (desktop centered, mobile top-anchored)"
    - "LayoutShell accepts children, optional header, optional footer props"
  artifacts:
    - path: "components/LayoutShell.tsx"
      provides: "Reusable layout component with responsive behavior"
      min_lines: 50
      exports: ["LayoutShell"]
  key_links:
    - from: "LayoutShell.tsx"
      to: "Tailwind responsive breakpoints"
      via: "lg: prefix for desktop, default for mobile"
      pattern: "lg:items-center lg:justify-center items-start pt-20"
---

<objective>
Create the LayoutShell component — the foundation of consistent responsive layout across all 8 game stages.

Purpose: Provide a single, reusable layout wrapper that handles desktop-centered and mobile-top-anchored positioning automatically, eliminating visual jumps between screens.

Output: components/LayoutShell.tsx with TypeScript types and responsive logic.
</objective>

<execution_context>
@/Users/yevgenschweden/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/yevgenschweden/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Current State:**
- All 8 game stage render methods in App.tsx have inconsistent layout patterns
- 7 screens use centered layout, Game screen uses offset layout causing visual jumps
- All use min-h-screen which causes mobile viewport issues (needs min-h-[100dvh])
- No unified layout component exists

**Design Decisions (from STATE.md):**
- Desktop centered, Mobile top-anchored (desktop has space for centering; mobile feels more app-like when top-anchored)
- Breakpoint at lg: (1024px) for desktop/mobile switch

**LayoutShell Requirements:**
- Desktop (≥1024px): flex items-center justify-center
- Mobile (<1024px): flex items-start pt-20
- Accept children prop (required)
- Accept optional header prop (ReactNode)
- Accept optional footer prop (ReactNode)
- Use min-h-[100dvh] not min-h-screen
- Apply safe-area-top and safe-area-bottom classes
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create LayoutShell component</name>
  <files>components/LayoutShell.tsx</files>
  <action>Create the LayoutShell component at components/LayoutShell.tsx with the following implementation:

1. Define TypeScript interface LayoutShellProps with:
   - children: React.ReactNode (required)
   - header?: React.ReactNode (optional)
   - footer?: React.ReactNode (optional)
   - className?: string (optional, for additional styling)

2. Create the LayoutShell component that renders:
   - Root div with classes:
     - "flex flex-col w-full"
     - "lg:items-center lg:justify-center items-start pt-20"
     - "min-h-[100dvh]"
     - "bg-black"
     - "safe-area-top safe-area-bottom"
     - Merge with optional className prop

3. Content structure inside root div:
   - Render header if provided
   - Render children (main content)
   - Render footer if provided

4. Export LayoutShell as default and named export

Key implementation details:
- Use lg: breakpoint for desktop (1024px)
- Desktop: items-center justify-center (centered vertically and horizontally)
- Mobile: items-start pt-20 (top-anchored with padding-top)
- Always use min-h-[100dvh] not min-h-screen for mobile viewport stability
- Include safe-area classes for notched devices
- Keep background as bg-black (consistent with existing screens)</action>
  <verify>Verify component exists and compiles:
```bash
ls -la components/LayoutShell.tsx
head -50 components/LayoutShell.tsx | grep -E "(interface LayoutShellProps|export|lg:items-center|min-h-\[100dvh\])"
```</verify>
  <done>LayoutShell component exists at components/LayoutShell.tsx with proper TypeScript types, responsive breakpoints (lg:items-center lg:justify-center for desktop, items-start pt-20 for mobile), and min-h-[100dvh] usage.</done>
</task>

<task type="auto">
  <name>Task 2: Update App.tsx root div to use min-h-[100dvh]</name>
  <files>App.tsx</files>
  <action>Update the root div in App.tsx's return statement:

Current code (line ~960):
```tsx
return (
  <div className="min-h-screen overflow-y-auto stage-transition" key={state.stage}>
    {renderStage()}
  </div>
);
```

Change to:
```tsx
return (
  <div className="min-h-[100dvh] overflow-y-auto stage-transition" key={state.stage}>
    {renderStage()}
  </div>
);
```

This is the first step in fixing LAYOUT-04 (mobile viewport instability). The remaining min-h-screen instances in render methods will be addressed in subsequent plans.</action>
  <verify>Verify change was made:
```bash
grep -n "min-h-\[100dvh\]" App.tsx | head -5
```</verify>
  <done>App.tsx root div uses min-h-[100dvh] instead of min-h-screen.</done>
</task>

</tasks>

<verification>
After completing both tasks:
1. Run `ls components/LayoutShell.tsx` to confirm file exists
2. Verify TypeScript compilation: Component should have proper Props interface
3. Check App.tsx: Root div should use min-h-[100dvh]
4. Ensure no syntax errors in new component
</verification>

<success_criteria>
- LayoutShell.tsx exists with TypeScript types and responsive logic
- Component exports both default and named exports
- Desktop behavior: lg:items-center lg:justify-center
- Mobile behavior: items-start pt-20
- Uses min-h-[100dvh] not min-h-screen
- App.tsx root div updated to min-h-[100dvh]
</success_criteria>

<output>
After completion, create `.planning/phases/01-layout-foundation/01-01-SUMMARY.md`
</output>
